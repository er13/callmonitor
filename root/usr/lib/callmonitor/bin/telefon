#!/bin/sh
PATH=/sbin:/usr/sbin:/mod/sbin:/mod/usr/sbin:/bin:/usr/bin:/mod/bin:/mod/usr/sbin

# configure: config might not yet exist (during the boot sequence)
: ${CALLMONITOR_CFG:=/mod/etc/default.callmonitor/system.cfg}

if [ -r "$CALLMONITOR_CFG" ]; then
    . "$CALLMONITOR_CFG"
    if [ -r "$CALLMONITOR_USERCFG" ]; then
	. "$CALLMONITOR_USERCFG"
    fi
fi

if [ "$CALLMONITOR_ENABLED" = "yes" ]; then
    telefon "$@" | callmonitor
else
    exec telefon "$@"
fi
